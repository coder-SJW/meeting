(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-00fe7f90"],{"4dad":function(t,e,a){"use strict";a.r(e);var r=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("div",{staticClass:"crumbs"},[a("el-breadcrumb",{attrs:{separator:"/"}},[a("el-breadcrumb-item",[a("i",{staticClass:"el-icon-lx-cascades"}),t._v(" 报修管理\n      ")])],1)],1),a("div",{staticClass:"container"},[a("div",{staticClass:"handle-box"},[a("el-form",{attrs:{inline:""}},[a("el-form-item",{attrs:{label:"状态"}},[a("el-select",{attrs:{filterable:"",placeholder:"请选择"},model:{value:t.filter.status,callback:function(e){t.$set(t.filter,"status",e)},expression:"filter.status"}},t._l(t.statusList,(function(t){return a("el-option",{key:t.code,attrs:{label:t.desc,value:t.code}})})),1)],1),a("el-form-item",{attrs:{label:"内容"}},[a("el-input",{staticClass:"handle-input mr10",staticStyle:{width:"180px"},model:{value:t.filter.content,callback:function(e){t.$set(t.filter,"content",e)},expression:"filter.content"}})],1),a("el-form-item",{attrs:{label:"会议室"}},[a("el-input",{staticClass:"handle-input mr10",staticStyle:{width:"180px"},model:{value:t.filter.roomName,callback:function(e){t.$set(t.filter,"roomName",e)},expression:"filter.roomName"}})],1),a("el-form-item",{attrs:{label:"报修人"}},[a("el-input",{staticClass:"handle-input mr10",staticStyle:{width:"180px"},model:{value:t.filter.accountPassport,callback:function(e){t.$set(t.filter,"accountPassport",e)},expression:"filter.accountPassport"}})],1),a("el-form-item",[t.$hasPermission("REPAIR_QUERY")?a("el-button",{attrs:{icon:"el-icon-search",type:"primary"},on:{click:function(e){return t.queryList()}}},[t._v("查询\n          ")]):t._e(),t.$hasPermission("REPAIR_EXPORT")?a("el-button",{attrs:{icon:"el-icon-search",type:"primary"},on:{click:function(e){return t.exportExcel()}}},[t._v("导出\n          ")]):t._e(),t.$hasPermission("REPAIR_CREATE")?a("el-button",{attrs:{icon:"el-icon-search",type:"primary"},on:{click:function(e){return t.create()}}},[t._v("创建\n          ")]):t._e()],1)],1)],1),a("paged-table",{attrs:{"current-page":t.filter.pageNum,data:t.tableData,"page-size":t.filter.pageSize,total:t.total},on:{"current-change":t.queryList,"size-change":t.pageSizeChange}},[a("el-table-column",{attrs:{label:"状态"},scopedSlots:t._u([{key:"default",fn:function(e){var r=e.row;return[1===r.status?a("el-tag",[t._v("未处理")]):2===r.status?a("el-tag",[t._v("处理中")]):3===r.status?a("el-tag",[t._v("已完成")]):t._e()]}}])}),a("el-table-column",{attrs:{label:"内容",prop:"content","show-overflow-tooltip":""}}),a("el-table-column",{attrs:{label:"创建时间"},scopedSlots:t._u([{key:"default",fn:function(e){var a=e.row;return[t._v(t._s(t._f("formatDate")(a.createTime)))]}}])}),a("el-table-column",{attrs:{label:"修改时间"},scopedSlots:t._u([{key:"default",fn:function(e){var a=e.row;return[t._v(t._s(t._f("formatDate")(a.updateTime)))]}}])}),a("el-table-column",{attrs:{label:"会议室",prop:"roomName"}}),a("el-table-column",{attrs:{label:"报修人",prop:"accountPassport"}}),a("el-table-column",{attrs:{align:"center",label:"操作",width:"180"},scopedSlots:t._u([{key:"default",fn:function(e){return[t.$hasPermission("REPAIR_QUERY")?a("el-button",{attrs:{size:"small",type:"text"},on:{click:function(a){return t.detail(e.row.id)}}},[t._v("详情\n          ")]):t._e(),t.$hasPermission("REPAIR_DELETE")?a("el-button",{attrs:{size:"small",type:"text"},on:{click:function(a){return t.remove(e.row.id)}}},[t._v("删除\n          ")]):t._e()]}}])})],1)],1)])},s=[],i=a("611a"),l=a("0748"),n={name:"Repair",components:{PagedTable:l["a"]},data(){return{filter:{status:"",content:"",roomName:"",accountPassport:"",pageNum:1,pageSize:20},total:0,accountList:[],roomList:[],statusList:[{code:-1,desc:"所有"},{code:1,desc:"未处理"},{code:2,desc:"处理中"},{code:3,desc:"已完成"}],tableData:[]}},created(){this.filter.status=this.statusList[0].code,this.queryList()},methods:{async queryList(t=1){this.filter.pageNum=t;const e=Object.assign({},this.filter),{data:a}=await i["a"].query(e);this.total=a.count,this.tableData=a.rows},async exportExcel(){this.filter.pageNum=1;const t=Object.assign({},this.filter);await i["a"].exportExcel(t)},pageSizeChange(t){this.filter.pageSize=t,this.queryList()},detail(t){this.$router.push("/repair-detail?id="+t)},create(){this.$router.push("/repair-create")},async remove(t){await this.$confirm("是否确认删除？","删除",{type:"warn"});try{await i["a"].remove(t),this.$message.success("删除成功！"),this.queryList()}catch(e){this.$message.error("删除失败！原因："+e.message)}}}},o=n,c=(a("f972"),a("2877")),u=Object(c["a"])(o,r,s,!1,null,"1ecb36e9",null);e["default"]=u.exports},"611a":function(t,e,a){"use strict";var r=a("1c1e");function s(t){return r["a"].post("/api/repair",t)}function i(t){return r["a"].remove("/api/repair",t)}function l(t,e){return r["a"].put("/api/repair",t,e)}function n(t){return r["a"].get("/api/repair",t)}function o(t){return r["a"].get("/api/repair",null,t)}function c(t){return r["a"].download("/api/repair/exportExcel",t)}e["a"]={create:s,remove:i,update:l,get:n,query:o,exportExcel:c}},be27:function(t,e,a){},f972:function(t,e,a){"use strict";a("be27")}}]);