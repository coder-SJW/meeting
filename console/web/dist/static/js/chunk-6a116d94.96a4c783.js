(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-6a116d94"],{"4bbd":function(e,t,r){},5433:function(e,t,r){"use strict";t["a"]={roomId:[{required:!0,message:"请输入会议室",trigger:"blur"}],accountId:[{required:!0,message:"请输入预约人",trigger:"blur"}],reserveStartTime:[{required:!0,message:"请输入开始时间",trigger:"blur"}],reserveEndTime:[{required:!0,message:"请输入结束时间",trigger:"blur"}],createTime:[{required:!0,message:"请输入创建时间",trigger:"blur"}]}},"740f":function(e,t,r){"use strict";r("4bbd")},"968f":function(e,t,r){"use strict";var i=r("1c1e");function a(e){return i["a"].post("/api/room",e)}function s(e){return i["a"].remove("/api/room",e)}function o(e,t){return i["a"].put("/api/room",e,t)}function l(e){return i["a"].get("/api/room",e)}function n(e){return i["a"].get("/api/room",null,e)}function c(e){return i["a"].get("/api/room/resource",null,e)}function u(e){return i["a"].download("/api/room/exportExcel",e)}t["a"]={create:a,remove:s,update:o,get:l,query:n,resource:c,exportExcel:u}},"9b7b":function(e,t,r){"use strict";r.r(t);var i=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"reserve-detail"},[r("h1",{staticClass:"reserve-detail__title"},[e._v("预约记录详情")]),r("el-form",{ref:"reserveForm",attrs:{disabled:!e.saveVisible,model:e.form,rules:e.rules,"label-width":"100px"}},[r("el-form-item",{attrs:{label:"会议室",prop:"roomId"}},[r("el-select",{attrs:{filterable:"",placeholder:"请选择"},model:{value:e.form.roomId,callback:function(t){e.$set(e.form,"roomId",t)},expression:"form.roomId"}},e._l(e.roomList,(function(e){return r("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})})),1)],1),r("el-form-item",{attrs:{label:"内容",prop:"content"}},[r("el-input",{staticStyle:{width:"500px"},attrs:{rows:4,type:"textarea"},model:{value:e.form.content,callback:function(t){e.$set(e.form,"content",t)},expression:"form.content"}})],1),r("el-form-item",{attrs:{label:"预约人",prop:"accountId"}},[r("el-select",{attrs:{filterable:"",placeholder:"请选择"},model:{value:e.form.accountId,callback:function(t){e.$set(e.form,"accountId",t)},expression:"form.accountId"}},e._l(e.accountList,(function(e){return r("el-option",{key:e.id,attrs:{label:e.passport,value:e.id}})})),1)],1),r("el-form-item",{attrs:{label:"开始时间",prop:"reserveStartTime"}},[r("el-date-picker",{attrs:{"default-time":"12:00:00",placeholder:"选择日期",type:"datetime","value-format":"timestamp"},model:{value:e.form.reserveStartTime,callback:function(t){e.$set(e.form,"reserveStartTime",t)},expression:"form.reserveStartTime"}})],1),r("el-form-item",{attrs:{label:"结束时间",prop:"reserveEndTime"}},[r("el-date-picker",{attrs:{"default-time":"12:00:00",placeholder:"选择日期",type:"datetime","value-format":"timestamp"},model:{value:e.form.reserveEndTime,callback:function(t){e.$set(e.form,"reserveEndTime",t)},expression:"form.reserveEndTime"}})],1)],1),r("el-form",[r("el-form-item",[e.$hasPermission("RESERVE_UPDATE")&&e.saveVisible?r("el-button",{attrs:{type:"primary"},on:{click:e.submitForm}},[e._v("保存\n      ")]):e._e()],1)],1)],1)},a=[],s=r("2824"),o=r("ccf4"),l=r("968f"),n=r("f5ff"),c=(r("5574"),r("3cdd")),u=r("a20c"),m=r("7989"),d=r("2ef7"),f=(r("f9e3"),r("15f5"),r("5433")),p={name:"ReserveDetail",components:{FullCalendar:n["a"]},props:{defaultValues:{type:Object,default(){return{id:"",content:"",reserveStartTime:"",reserveEndTime:"",roomName:"",accountPassport:""}}}},data(){return{calendarOptions:{plugins:[c["a"],u["a"],m["a"],d["a"]],initialView:"resourceTimeline",schedulerLicenseKey:"CC-Attribution-NonCommercial-NoDerivatives",selectable:!0,height:600,resources:[],events:[],select:this.handleSelect,eventDrop:this.eventDrop,eventResize:this.eventResize},roomList:[],saveVisible:!1,id:this.$route.query.id,form:Object.assign({},this.defaultValues),rules:f["a"],accountList:[]}},mounted(){this.id&&(this.getDetail(this.id),this.isEdit=!0,this.saveVisible=!1)},created(){this.queryAccountList(),this.queryRoomList()},watch:{$route(e,t){e.path.includes("/reserve-detail")&&"undefined"!==typeof e.query.id&&(this.id=e.query.id,this.form.imageList=[],this.getDetail(this.id),this.saveVisible=!1)}},methods:{async getDetail(e){const{data:t}=await s["a"].get(e);this.form=t},async queryAccountList(){const{data:e}=await o["a"].query({pageSize:1e3,pageNum:1});this.accountList=e.rows},async queryRoomList(){const{data:e}=await l["a"].query({pageSize:1e3,pageNum:1});this.roomList=e.rows},async submitForm(){try{await this.$refs.reserveForm.validate()}catch(e){return Promise.reject(new Error("表单校验失败"))}try{let e=Object.assign({},this.form);await s["a"].update(e.id,e),this.saveVisible=!1,this.$emit("success"),this.$message.success("编辑成功！")}catch(t){this.$message.error("编辑失败！原因："+t.message)}},showSaveButton(){this.saveVisible=!0}}},v=p,h=(r("740f"),r("2877")),b=Object(h["a"])(v,i,a,!1,null,null,null);t["default"]=b.exports}}]);